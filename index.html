<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Promote 100 Pro</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f8ff;
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .container {
    background: white;
    border-radius: 12px;
    width: 400px;
    max-width: 90vw;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    padding: 30px 25px;
    position: relative;
  }
  h1 {
    text-align: center;
    margin-bottom: 25px;
    color: #293462;
  }
  label {
    font-weight: 600;
    display: block;
    margin-bottom: 6px;
    color: #4a4a4a;
  }
  select, input[type="text"], input[type="url"], textarea, input[type="file"] {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 18px;
    border: 1.8px solid #ccc;
    border-radius: 7px;
    font-size: 14px;
    transition: border-color 0.3s ease;
  }
  select:focus, input[type="text"]:focus, input[type="url"]:focus, textarea:focus, input[type="file"]:focus {
    outline: none;
    border-color: #293462;
  }
  textarea {
    resize: vertical;
    min-height: 70px;
  }
  button {
    background: #293462;
    color: white;
    border: none;
    padding: 12px 0;
    width: 100%;
    font-weight: 700;
    font-size: 16px;
    border-radius: 7px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover:not(:disabled) {
    background: #4158d0;
  }
  button:disabled {
    background: #a0a0a0;
    cursor: not-allowed;
  }
  .back-btn {
    background: #f0f0f0;
    color: #293462;
    margin-bottom: 20px;
    font-weight: 600;
  }
  .back-btn:hover {
    background: #ddd;
  }
  .hidden {
    display: none;
  }
  .copy-container {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 18px;
  }
  .copy-text {
    flex-grow: 1;
    background: #e8e8e8;
    padding: 10px 12px;
    border-radius: 7px;
    font-weight: 600;
    user-select: all;
  }
  .copy-btn {
    padding: 9px 14px;
    background: #4158d0;
    color: white;
    border: none;
    border-radius: 7px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }
  .copy-btn:hover {
    background: #293462;
  }
  .message {
    text-align: center;
    margin-top: 15px;
    font-weight: 600;
    color: green;
  }
  .error {
    color: red;
  }
</style>
</head>
<body>
<div class="container">
  <h1>Promote 100 Pro</h1>

  <!-- Step 1 Form -->
  <form id="step1Form">
    <div id="step1">
      <label for="methodSelect">Select Method</label>
      <select id="methodSelect" required>
        <option value="" disabled selected>Choose an option</option>
        <option value="TikTok">TikTok</option>
        <option value="FacebookProfile">Facebook Profile</option>
        <option value="FacebookPage">Facebook Page</option>
      </select>

      <label for="workTitle">Work Title</label>
      <input type="text" id="workTitle" placeholder="Enter Work Title" required />

      <label for="workLink">Work Link</label>
      <input type="url" id="workLink" placeholder="Enter Work Link" required />

      <label for="workerCount">Select Number of Workers</label>
      <select id="workerCount" required>
        <option value="" disabled selected>Select workers</option>
        <option value="500">500</option>
        <option value="1000">1000</option>
        <option value="2000">2000</option>
      </select>

      <label for="workScreenshot">Work Screenshot</label>
      <input type="file" id="workScreenshot" accept="image/*" required />

      <label for="workDescription">Work Description</label>
      <textarea id="workDescription" placeholder="Enter Work Description" required></textarea>

      <button type="button" id="continueBtn">Continue</button>
    </div>
  </form>

  <!-- Step 2 Payment -->
  <form id="step2Form" class="hidden">
    <div id="step2">
      <button type="button" class="back-btn" id="backToStep1">← Back</button>

      <label for="paymentMethod">Select Payment Method</label>
      <select id="paymentMethod" required>
        <option value="" disabled selected>Select payment method</option>
        <option value="Bkash">Bkash</option>
        <option value="Nagad">Nagad</option>
      </select>

      <div id="paymentDetails" class="copy-container hidden">
        <div id="paymentNumber" class="copy-text"></div>
        <button type="button" class="copy-btn" id="copyBtn">Copy</button>
      </div>

      <label for="transactionId">Transaction ID (Only send money)</label>
      <input type="text" id="transactionId" placeholder="Enter Transaction ID" required />

      <div id="payAmountSummary" style="font-weight:700; margin: 18px 0; color: #293462;"></div>

      <button type="submit" id="placeOrderBtn" disabled>Place Order</button>

      <div id="message" class="message"></div>
    </div>
  </form>
</div>

<script>
  // Telegram Bot Config
  const BOT_TOKEN = '8291524245:AAHmmb3ex-WrAL_mMtg1USvhIBL2fvrflvw';
  const CHAT_ID = '6593402184';

  // DOM Elements
  const step1Form = document.getElementById('step1Form');
  const step2Form = document.getElementById('step2Form');

  const step1 = document.getElementById('step1');
  const step2 = document.getElementById('step2');

  const continueBtn = document.getElementById('continueBtn');
  const backToStep1Btn = document.getElementById('backToStep1');

  const paymentMethodSelect = document.getElementById('paymentMethod');
  const paymentDetailsDiv = document.getElementById('paymentDetails');
  const paymentNumberDiv = document.getElementById('paymentNumber');
  const copyBtn = document.getElementById('copyBtn');
  const transactionIdInput = document.getElementById('transactionId');

  const workerCountSelect = document.getElementById('workerCount');
  const payAmountSummary = document.getElementById('payAmountSummary');

  const placeOrderBtn = document.getElementById('placeOrderBtn');

  const messageDiv = document.getElementById('message');

  // Payment Numbers
  const paymentNumbers = {
    'Bkash': '01750631170',
    'Nagad': '01842145643'
  };

  // Price mapping based on workers
  const payAmounts = {
    '500': 300,
    '1000': 600,
    '2000': 1200
  };

  // CONTINUE button click
  continueBtn.addEventListener('click', () => {
    // Validate all step1 inputs
    if(!step1Form.checkValidity()) {
      step1Form.reportValidity();
      return;
    }

    // Show step2, hide step1
    step1.style.display = 'none';
    step2Form.classList.remove('hidden');

    // Set amount text
    const selectedCount = workerCountSelect.value;
    payAmountSummary.textContent = `You need to pay ৳${payAmounts[selectedCount]} for ${selectedCount} workers.`;

    // Reset step2 inputs and states
    paymentMethodSelect.value = '';
    paymentDetailsDiv.classList.add('hidden');
    paymentNumberDiv.textContent = '';
    transactionIdInput.value = '';
    placeOrderBtn.disabled = true;
    messageDiv.textContent = '';
  });

  // Back button click (step2 to step1)
  backToStep1Btn.addEventListener('click', () => {
    step2Form.classList.add('hidden');
    step1.style.display = 'block';
    messageDiv.textContent = '';
  });

  // Show payment number on method select
  paymentMethodSelect.addEventListener('change', () => {
    const method = paymentMethodSelect.value;
    if(method && paymentNumbers[method]) {
      paymentNumberDiv.textContent = paymentNumbers[method];
      paymentDetailsDiv.classList.remove('hidden');
      placeOrderBtn.disabled = !transactionIdInput.value.trim();
    } else {
      paymentDetailsDiv.classList.add('hidden');
      paymentNumberDiv.textContent = '';
      placeOrderBtn.disabled = true;
    }
  });

  // Copy button
  copyBtn.addEventListener('click', () => {
    const textToCopy = paymentNumberDiv.textContent;
    navigator.clipboard.writeText(textToCopy).then(() => {
      alert('Copied: ' + textToCopy);
    }).catch(() => {
      alert('Failed to copy');
    });
  });

  // Enable Place Order button only if transaction ID entered and payment method selected
  transactionIdInput.addEventListener('input', () => {
    placeOrderBtn.disabled = !(transactionIdInput.value.trim() && paymentMethodSelect.value);
  });

  // Place Order submit event
  step2Form.addEventListener('submit', async (e) => {
    e.preventDefault();

    if(!transactionIdInput.value.trim()) {
      alert('Please enter Transaction ID');
      return;
    }
    if(!paymentMethodSelect.value) {
      alert('Please select Payment Method');
      return;
    }

    // Gather all data
    const data = {
      method: document.getElementById('methodSelect').value,
      workTitle: document.getElementById('workTitle').value.trim(),
      workLink: document.getElementById('workLink').value.trim(),
      workerCount: workerCountSelect.value,
      // For screenshot we will send file name only because file upload to Telegram needs server-side handling
      workScreenshotName: document.getElementById('workScreenshot').files[0]?.name || '',
      workDescription: document.getElementById('workDescription').value.trim(),
      paymentMethod: paymentMethodSelect.value,
      paymentNumber: paymentNumbers[paymentMethodSelect.value],
      transactionId: transactionIdInput.value.trim(),
      payAmount: payAmounts[workerCountSelect.value]
    };

    // Prepare message text for Telegram
    const telegramMessage = `
New Promote 100 Pro Order:
Method: ${data.method}
Work Title: ${data.workTitle}
Work Link: ${data.workLink}
Number of Workers: ${data.workerCount}
Work Screenshot: ${data.workScreenshotName}
Work Description: ${data.workDescription}
Payment Method: ${data.paymentMethod}
Payment Number: ${data.paymentNumber}
Transaction ID: ${data.transactionId}
Amount Paid: ৳${data.payAmount}
    `;

    // Telegram API URL
    const telegramApiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

    try {
      const res = await fetch(telegramApiUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: telegramMessage
        })
      });

      if(res.ok) {
        messageDiv.style.color = 'green';
        messageDiv.textContent = 'Order placed successfully! We will contact you soon.';
        placeOrderBtn.disabled = true;
      } else {
        throw new Error('Telegram API error');
      }
    } catch (error) {
      messageDiv.style.color = 'red';
      messageDiv.textContent = 'Failed to send order. Please try again later.';
    }
  });
</script>
</body>
</html>
